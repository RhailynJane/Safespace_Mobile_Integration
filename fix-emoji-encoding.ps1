# Read the file as UTF-8 bytes and write back with proper UTF-8
$file = 'c:\SafeSpace-prototype\app\(app)\(tabs)\messages\message-chat-screen.tsx'

# Read the file content
$content = [System.IO.File]::ReadAllText($file, [System.Text.Encoding]::UTF8)

# Define emoji replacements (garbled -> correct)
$replacements = @{
    'ðŸ˜Š' = '😊'; 'â¤ï¸' = '❤️'; 'ðŸ˜‚' = '😂'; 'ðŸ'' = '👍'; 'ðŸ™' = '🙏'
    'ðŸ˜­' = '😭'; 'ðŸŽ‰' = '🎉'; 'ðŸ"¥' = '🔥'; 'ðŸ'¯' = '💯'; 'âœ¨' = '✨'
    'ðŸ˜' = '😍'; 'ðŸ¤"' = '🤔'; 'ðŸ˜¢' = '😢'; 'ðŸ¥°' = '🥰'; 'ðŸ˜…' = '😅'
    'ðŸ˜Ž' = '😎'; 'ðŸ'ª' = '💪'; 'ðŸ'' = '👏'; 'ðŸ™Œ' = '🙌'; 'ðŸ'•' = '💕'
    'ðŸ˜€' = '😀'; 'ðŸ˜ƒ' = '😃'; 'ðŸ˜„' = '😄'; 'ðŸ˜' = '😁'; 'ðŸ˜†' = '😆'
    'ðŸ¤£' = '🤣'; 'ðŸ™‚' = '🙂'; 'ðŸ™ƒ' = '🙃'; 'ðŸ˜‰' = '😉'; 'ðŸ˜‡' = '😇'
    'ðŸ¤©' = '🤩'; 'ðŸ˜˜' = '😘'; 'ðŸ˜—' = '😗'; 'ðŸ˜š' = '😚'; 'ðŸ˜™' = '😙'
    'ðŸ˜‹' = '😋'; 'ðŸ˜›' = '😛'; 'ðŸ˜œ' = '😜'; 'ðŸ¤ª' = '🤪'; 'ðŸ˜' = '😝'
    'ðŸ¤'' = '🤑'; 'ðŸ¤—' = '🤗'; 'ðŸ¤­' = '🤭'; 'ðŸ¤«' = '🤫'; 'ðŸ˜' = '🤐'
    'ðŸ˜'' = '🤨'; 'ðŸ˜¶' = '😐'; 'ðŸ˜'' = '😑'; 'ðŸ™„' = '🙄'; 'ðŸ˜¬' = '😬'
    'ðŸ¤¥' = '🤥'; 'ðŸ˜Œ' = '😌'; 'ðŸ˜"' = '😔'; 'ðŸ˜ª' = '😪'; 'ðŸ¤¤' = '🤤'
    'ðŸ˜´' = '😴'; 'ðŸ˜·' = '😷'; 'ðŸ¤'' = '🤒'; 'ðŸ¤•' = '🤕'; 'ðŸ¤¢' = '🤢'
    'ðŸ¤®' = '🤮'; 'ðŸ¤§' = '🤧'; 'ðŸ¥µ' = '🥵'; 'ðŸ¥¶' = '🥶'; 'ðŸ˜µ' = '😵'
    'ðŸ¤¯' = '🤯'; 'ðŸ¤ ' = '🤠'; 'ðŸ¥³' = '🥳'; 'ðŸ¤"' = '🤓'; 'ðŸ§' = '🧐'
    'ðŸ˜•' = '😕'; 'ðŸ˜Ÿ' = '😟'; 'ðŸ˜®' = '😮'; 'ðŸ˜¯' = '😯'; 'ðŸ˜²' = '😲'
    'ðŸ˜³' = '😳'; 'ðŸ¥º' = '🥺'; 'ðŸ˜¦' = '😦'; 'ðŸ˜§' = '😧'; 'ðŸ˜¨' = '😨'
    'ðŸ˜°' = '😰'; 'ðŸ˜¥' = '😥'; 'ðŸ˜±' = '😱'; 'ðŸ˜–' = '😖'; 'ðŸ˜£' = '😣'
    'ðŸ˜ž' = '😞'; 'ðŸ˜"' = '😓'; 'ðŸ˜©' = '😩'; 'ðŸ˜«' = '😫'; 'ðŸ¥±' = '🥱'
    'ðŸ˜¤' = '😤'; 'ðŸ˜¡' = '😡'; 'ðŸ˜ ' = '😠'; 'ðŸ¤¬' = '🤬'; 'ðŸ˜ˆ' = '😈'
    'ðŸ'¿' = '👿'; 'ðŸ'€' = '💀'; 'â˜ ï¸' = '☠️'; 'ðŸ'©' = '💩'; 'ðŸ¤¡' = '🤡'
    'ðŸ'¹' = '👹'; 'ðŸ'º' = '👺'; 'ðŸ'»' = '👻'; 'ðŸ'½' = '👽'; 'ðŸ'¾' = '👾'
    'ðŸ¤–' = '🤖'; 'ðŸ˜º' = '😺'; 'ðŸ˜¸' = '😸'; 'ðŸ˜¹' = '😹'; 'ðŸ'‹' = '👋'
    'ðŸ¤š' = '🤚'; 'ðŸ–ï¸' = '🖐️'; 'âœ‹' = '✋'; 'ðŸ––' = '🖖'; 'ðŸ'Œ' = '👌'
    'ðŸ¤Œ' = '🤌'; 'ðŸ¤' = '🤏'; 'âœŒï¸' = '✌️'; 'ðŸ¤ž' = '🤞'; 'ðŸ¤Ÿ' = '🤟'
    'ðŸ¤˜' = '🤘'; 'ðŸ¤™' = '🤙'; 'ðŸ'ˆ' = '👈'; 'ðŸ'‰' = '👉'; 'ðŸ'†' = '👆'
    'ðŸ–•' = '🖕'; 'ðŸ'‡' = '👇'; 'â˜ï¸' = '☝️'; 'ðŸ'Ž' = '👎'; 'âœŠ' = '✊'
    'ðŸ'Š' = '👊'; 'ðŸ¤›' = '🤛'; 'ðŸ¤œ' = '🤜'; 'ðŸ'' = '👐'; 'ðŸ¤²' = '🤲'
    'ðŸ¤' = '🤝'; 'âœï¸' = '✍️'; 'ðŸ'…' = '💅'; 'ðŸ¤³' = '🤳'; 'ðŸ¦¾' = '🦾'
    'ðŸ¦¿' = '🦿'; 'ðŸ¦µ' = '🦵'; 'ðŸ¦¶' = '🦶'; 'ðŸ'‚' = '👂'; 'ðŸ¦»' = '🦻'
    'ðŸ'ƒ' = '👃'; 'ðŸ§ ' = '🧠'; 'ðŸ«€' = '🫀'; 'ðŸ«' = '🫁'; 'ðŸ¦·' = '🦷'
    'ðŸ¦´' = '🦴'; 'ðŸ'€' = '👀'; 'ðŸ'ï¸' = '👁️'; 'ðŸ'…' = '👅'; 'ðŸ'„' = '👄'
    'ðŸ©¸' = '🩸'; 'ðŸ'¶' = '👶'; 'ðŸ'§' = '👧'; 'ðŸ§'' = '🧒'; 'ðŸ'¦' = '👦'
    'ðŸ'©' = '👩'; 'ðŸ§'' = '🧑'; 'ðŸ'¨' = '👨'; 'ðŸ¶' = '🐶'; 'ðŸ±' = '🐱'
    'ðŸ­' = '🐭'; 'ðŸ¹' = '🐹'; 'ðŸ°' = '🐰'; 'ðŸ¦Š' = '🦊'; 'ðŸ»' = '🐻'
    'ðŸ¼' = '🐼'; 'ðŸ¨' = '🐨'; 'ðŸ¯' = '🐯'; 'ðŸ¦' = '🦁'; 'ðŸ®' = '🐮'
    'ðŸ·' = '🐷'; 'ðŸ½' = '🐽'; 'ðŸ¸' = '🐸'; 'ðŸµ' = '🐵'; 'ðŸ™ˆ' = '🙈'
    'ðŸ™‰' = '🙉'; 'ðŸ™Š' = '🙊'; 'ðŸ'' = '🐒'; 'ðŸ"' = '🐔'; 'ðŸ§' = '🐧'
    'ðŸ¦' = '🐦'; 'ðŸ¤' = '🐤'; 'ðŸ£' = '🐣'; 'ðŸ¥' = '🐥'; 'ðŸ¦†' = '🦆'
    'ðŸ¦…' = '🦅'; 'ðŸ¦‰' = '🦉'; 'ðŸ¦‡' = '🦇'; 'ðŸº' = '🐺'; 'ðŸ—' = '🐗'
    'ðŸ´' = '🐴'; 'ðŸ¦„' = '🦄'; 'ðŸ' = '🐝'; 'ðŸ›' = '🐛'; 'ðŸ¦‹' = '🦋'
    'ðŸŒ' = '🐌'; 'ðŸž' = '🐞'; 'ðŸœ' = '🐜'; 'ðŸ¦Ÿ' = '🦟'; 'ðŸ¦—' = '🦗'
    'ðŸ•·ï¸' = '🕷️'; 'ðŸ•¸ï¸' = '🕸️'; 'ðŸ¦‚' = '🦂'; 'ðŸ¢' = '🐢'; 'ðŸ' = '🐍'
    'ðŸ¦Ž' = '🦎'; 'ðŸ¦–' = '🦖'; 'ðŸ¦•' = '🦕'; 'ðŸ™' = '🐙'; 'ðŸ¦'' = '🦑'
    'ðŸ¦' = '🦐'; 'ðŸ¦€' = '🦀'; 'ðŸ ' = '🐠'; 'ðŸŸ' = '🐟'; 'ðŸ¡' = '🐡'
    'ðŸ¬' = '🐬'; 'ðŸ³' = '🐳'; 'ðŸ‹' = '🐋'; 'ðŸ¦ˆ' = '🦈'; 'ðŸŠ' = '🐊'
    'ðŸ…' = '🐅'; 'ðŸ†' = '🐆'; 'ðŸ¦"' = '🦓'; 'ðŸ¦' = '🦍'; 'ðŸ¦§' = '🦧'
    'ðŸ˜' = '🐘'; 'ðŸ¦' = '🦏'; 'ðŸ¦›' = '🦛'; 'ðŸª' = '🐪'; 'ðŸ«' = '🐫'
    'ðŸ¦'' = '🦒'; 'ðŸ¦˜' = '🦘'; 'ðŸ' = '🐃'; 'ðŸ‚' = '🐂'; 'ðŸ„' = '🐄'
    'ðŸŽ' = '🐎'; 'ðŸ–' = '🐖'; 'ðŸ' = '🐏'; 'ðŸ'' = '🐑'; 'ðŸ' = '🐐'
    'ðŸª' = '🐪'; 'ðŸ•' = '🐕'; 'ðŸ©' = '🐩'; 'ðŸˆ' = '🐈'; 'ðŸ"' = '🐓'
    'ðŸ¦ƒ' = '🦃'; 'ðŸ¦š' = '🦚'; 'ðŸ¦œ' = '🦜'; 'ðŸ¦¢' = '🦢'; 'ðŸ¦©' = '🦩'
    'ðŸ•Š' = '🕊'; 'ðŸ‡' = '🐇'; 'ðŸ¦' = '🦎'; 'ðŸ' = '🍏'; 'ðŸŽ' = '🍎'
    'ðŸ' = '🍐'; 'ðŸŠ' = '🍊'; 'ðŸ‹' = '🍋'; 'ðŸŒ' = '🍌'; 'ðŸ‰' = '🍉'
    'ðŸ‡' = '🍇'; 'ðŸ"' = '🍓'; 'ðŸ«' = '🫐'; 'ðŸˆ' = '🍈'; 'ðŸ'' = '🍑'
    'ðŸ¥­' = '🥭'; 'ðŸ' = '🍍'; 'ðŸ¥¥' = '🥥'; 'ðŸ¥' = '🥝'; 'ðŸ…' = '🍅'
    'ðŸ†' = '🍆'; 'ðŸ¥'' = '🥑'; 'ðŸ¥¦' = '🥦'; 'ðŸ¥¬' = '🥬'; 'ðŸ¥'' = '🥒'
    'ðŸŒ¶ï¸' = '🌶️'; 'ðŸŒ½' = '🌽'; 'ðŸ¥•' = '🥕'; 'ðŸ«'' = '🫒'; 'ðŸ§„' = '🧄'
    'ðŸ§…' = '🧅'; 'ðŸ¥"' = '🥔'; 'ðŸ ' = '🍠'; 'ðŸ¥Ÿ' = '🥐'; 'ðŸ¥–' = '🥖'
    'ðŸ¥¨' = '🥨'; 'ðŸ¥¯' = '�¯'; 'ðŸž' = '🍞'; 'ðŸ¥š' = '🥚'; 'ðŸ³' = '🍳'
    'ðŸ§€' = '🧀'; 'ðŸ¥"' = '🥓'; 'ðŸ¥©' = '🥩'; 'ðŸ—' = '🍗'; 'ðŸ–' = '🍖'
    'ðŸŒ­' = '🌭'; 'ðŸ"' = '🍔'; 'ðŸŸ' = '🍟'; 'ðŸ•' = '🍕'; 'ðŸ«"' = '🫓'
    'ðŸ¥ª' = '🥪'; 'ðŸ¥™' = '🥙'; 'ðŸ§†' = '🧆'; 'ðŸŒ®' = '🌮'; 'ðŸŒ¯' = '🌯'
    'ðŸ«"' = '🫔'; 'ðŸ¥—' = '🥗'; 'ðŸ¥˜' = '🥘'; 'ðŸ«•' = '🫕'; 'ðŸ¥«' = '🥫'
    'ðŸ' = '🍝'; 'ðŸœ' = '🍜'; 'ðŸ²' = '🍲'; 'ðŸ›' = '🍛'; 'ðŸ£' = '🍣'
    'ðŸ±' = '🍱'; 'ðŸ¥' = '🥟'; 'ðŸ¦ª' = '🦪'; 'ðŸ¤' = '🍤'; 'ðŸ™' = '🍙'
    'ðŸš' = '🍚'; 'ðŸ˜' = '🍘'; 'ðŸ¥' = '🍥'; 'ðŸ¥ ' = '🥠'; 'ðŸ¥®' = '🥮'
    'ðŸ¢' = '🍢'; 'ðŸ¡' = '🍡'; 'ðŸ§' = '🍧'; 'ðŸ¨' = '🍨'; 'ðŸ¦' = '🍦'
    'ðŸ¥§' = '🥧'; 'ðŸ§' = '🧁'; 'ðŸ°' = '🍰'; 'ðŸŽ‚' = '🎂'; 'ðŸ®' = '🍮'
    'ðŸ¬' = '🍬'; 'ðŸ«' = '🍫'; 'ðŸ¿' = '🍿'; 'ðŸ©' = '🍩'; 'ðŸª' = '🍪'
    'ðŸŒ°' = '🌰'; 'ðŸ¥œ' = '🥜'; 'ðŸ¯' = '🍯'; 'â˜•' = '☕'; 'ðŸµ' = '🍵'
    'ðŸ§ƒ' = '🧃'; 'ðŸ¥¤' = '🥤'; 'ðŸ§‹' = '🧋'; 'ðŸ¶' = '🍶'; 'ðŸº' = '🍺'
    'ðŸ»' = '🍻'; 'ðŸ¥‚' = '🥂'; 'âš½' = '⚽'; 'ðŸ€' = '🏀'; 'ðŸˆ' = '🏈'
    'âš¾' = '⚾'; 'ðŸ¥Ž' = '🥎'; 'ðŸŽ¾' = '🎾'; 'ðŸ' = '🏐'; 'ðŸ‰' = '🏉'
    'ðŸ¥' = '🥏'; 'ðŸŽ±' = '🎱'; 'ðŸª€' = '🪀'; 'ðŸ"' = '🏓'; 'ðŸ¸' = '🏸'
    'ðŸ'' = '🏑'; 'ðŸ'' = '🏒'; 'ðŸ¥' = '🥍'; 'ðŸ' = '🏏'; 'ðŸ¥…' = '🥅'
    'â›³' = '⛳'; 'ðŸª' = '🪁'; 'ðŸ¤¿' = '🤿'; 'ðŸ¥Š' = '🥊'; 'ðŸ¥‹' = '🥋'
    'ðŸŽ½' = '🎽'; 'ðŸ›¹' = '🛹'; 'ðŸ›¼' = '🛼'; 'ðŸ›·' = '🛷'; 'â›¸ï¸' = '⛸️'
    'ðŸ¥Œ' = '🥌'; 'ðŸŽ¿' = '🎿'; 'â›·ï¸' = '⛷️'; 'ðŸ‚' = '🏂'; 'ðŸª‚' = '🪂'
    'ðŸ‹ï¸' = '🏋️'; 'ðŸ¤¼' = '🤼'; 'ðŸ¤¸' = '🤸'; 'ðŸ¤º' = '🤺'; 'â›¹ï¸' = '⛹️'
    'ðŸ¤¾' = '🤾'; 'ðŸŒï¸' = '🏌️'; 'ðŸ‡' = '🏇'; 'ðŸ§˜' = '🧘'; 'ðŸ„' = '🏄'
    'ðŸŠ' = '🏊'; 'ðŸ¤½' = '🤽'; 'ðŸš£' = '🚣'; 'ðŸ§—' = '🧗'; 'ðŸšµ' = '🚵'
    'ðŸš´' = '🚴'; 'ðŸ†' = '🏆'; 'ðŸ¥‡' = '🥇'; 'ðŸ¥ˆ' = '🥈'; 'ðŸ¥‰' = '🥉'
    'ðŸ…' = '🏅'; 'ðŸŽ–ï¸' = '🎖️'; 'ðŸµï¸' = '🏵️'; 'ðŸŽ—ï¸' = '🎗️'; 'ðŸŽ«' = '🎫'
    'ðŸŽŸï¸' = '🎟️'; 'ðŸŽª' = '🎪'; 'ðŸ¤¹' = '🤹'; 'ðŸŽ­' = '🎭'; 'ðŸ©°' = '🩰'
    'ðŸŽ¨' = '🎨'; 'ðŸŽ¬' = '🎬'; 'ðŸŽ¤' = '🎤'; 'ðŸŽ§' = '🎧'; 'ðŸŽ¼' = '🎼'
    'ðŸŽ¹' = '🎹'; 'ðŸ¥' = '🥁'; 'ðŸŽ·' = '🎷'; 'ðŸŽº' = '🎺'; 'ðŸŽ¸' = '🎸'
    'ðŸª•' = '🪕'; 'ðŸŽ»' = '🎻'; 'ðŸŽ²' = '🎲'; 'â™Ÿï¸' = '♟️'; 'ðŸŽ¯' = '🎯'
    'ðŸŽ³' = '🎳'; 'ðŸŽ®' = '🎮'; 'ðŸŽ°' = '🎰'; 'ðŸ§©' = '🧩'; 'ðŸŽˆ' = '🎈'
    'ðŸŽ' = '🎁'; 'ðŸŽ€' = '🎀'; 'ðŸš—' = '🚗'; 'ðŸš•' = '🚕'; 'ðŸš™' = '🚙'
    'ðŸšŒ' = '🚌'; 'ðŸšŽ' = '🚎'; 'ðŸŽï¸' = '🏎️'; 'ðŸš"' = '🚓'; 'ðŸš'' = '🚑'
    'ðŸš'' = '🚒'; 'ðŸš' = '🚐'; 'ðŸ›»' = '🛻'; 'ðŸšš' = '🚚'; 'ðŸš›' = '🚛'
    'ðŸšœ' = '🚜'; 'ðŸ¦¯' = '🦯'; 'ðŸ¦½' = '🦽'; 'ðŸ¦¼' = '🦼'; 'ðŸ©¼' = '🩼'
    'ðŸ›´' = '🛴'; 'ðŸš²' = '🚲'; 'ðŸ›µ' = '🛵'; 'ðŸï¸' = '🏍️'; 'ðŸ›º' = '🛺'
    'ðŸš¨' = '🚨'; 'ðŸš"' = '🚔'; 'ðŸš' = '🚍'; 'ðŸš˜' = '🚘'; 'ðŸš–' = '🚖'
    'ðŸš¡' = '🚡'; 'ðŸš ' = '🚠'; 'ðŸšŸ' = '🚟'; 'ðŸšƒ' = '🚃'; 'ðŸš‹' = '🚋'
    'ðŸšž' = '🚞'; 'ðŸš' = '🚝'; 'ðŸš„' = '🚄'; 'ðŸš…' = '🚅'; 'ðŸšˆ' = '🚈'
    'ðŸš‚' = '🚂'; 'ðŸš†' = '🚆'; 'ðŸš‡' = '🚇'; 'ðŸšŠ' = '🚊'; 'ðŸš‰' = '🚉'
    'âœˆï¸' = '✈️'; 'ðŸ›«' = '🛫'; 'ðŸ›¬' = '🛬'; 'ðŸ›©ï¸' = '🛩️'; 'ðŸ'º' = '💺'
    'ðŸ›°ï¸' = '🛰️'; 'ðŸš€' = '🚀'; 'ðŸ›¸' = '🛸'; 'ðŸš' = '🚁'; 'ðŸ›¶' = '🛶'
    'â›µ' = '⛵'; 'ðŸš¤' = '🚤'; 'ðŸ›¥ï¸' = '🛥️'; 'ðŸ›³ï¸' = '🛳️'; 'â›´ï¸' = '⛴️'
    'ðŸš¢' = '🚢'; 'âš"' = '⚓'; 'â›½' = '⛽'; 'ðŸš§' = '🚧'; 'ðŸš¦' = '🚦'
    'ðŸš¥' = '🚥'; 'ðŸš' = '🚏'; 'ðŸ—ºï¸' = '🗺️'; 'ðŸ—¿' = '🗿'; 'ðŸ—½' = '🗽'
    'ðŸ—¼' = '🗼'; 'ðŸ°' = '🏰'; 'ðŸ¯' = '🏯'; 'ðŸŸï¸' = '🏟️'; 'ðŸŽ¡' = '🎡'
    'ðŸŽ¢' = '🎢'; 'ðŸŽ ' = '🎠'; 'â›²' = '⛲'; 'â›±ï¸' = '⛱️'; 'ðŸ–ï¸' = '🏖️'
    'ðŸï¸' = '🏝️'; 'ðŸœï¸' = '🏜️'
}

# Apply replacements
foreach ($key in $replacements.Keys) {
    $content = $content.Replace($key, $replacements[$key])
}

# Write back with UTF-8 BOM
[System.IO.File]::WriteAllText($file, $content, [System.Text.UTF8Encoding]::new($true))

Write-Host "Fixed emoji encoding in $file"
